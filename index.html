<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obscura | Video Editing & Generative AI</title>
    <!-- Brand fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet"> <!-- New font for radio display -->


    <!-- Favicon -->
    <link rel="icon" href="/logo/Obscura-logo.svg" type="image/svg+xml">

    <!-- Preconnect hints -->
    <link rel="preconnect" href="https://i.ytimg.com">
    <link rel="preconnect" href="https://www.youtube-nocookie.com">

    <!-- SEO / Social -->
    <meta name="description" content="Obscura is a Toronto-based studio specializing in video editing, motion graphics, and generative AI for cutting-edge storytelling.">
    <meta property="og:title" content="Obscura">
    <meta property="og:description" content="Editorial | Generative AI | Experiential">
    <meta property="og:url" content="https://www.obscura.life/">
    <meta property="og:image" content="https://www.obscura.life/og-image.jpg">
    <meta property="og:type" content="website">
    <style>
        :root {
            --accent-color: #0455BF;      /* blue */
            --background-color: #FFCB00;  /* yellow */
            --text-color: #1A1A1A;        /* off‑white */
            --card-bg-color: #FAFAFA;     /* white for panels */
            --border-radius-xl: 1rem;
            --soft-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08),
                           0 4px 6px -2px rgba(0, 0, 0, 0.04);
            --spectral-gradient: linear-gradient(90deg,
                hsl(210, 80%, 55%), hsl(220, 80%, 55%), hsl(230, 80%, 55%)); /* cleaned to a blue gradient */
            --font-sans: "Red Hat Display", system-ui, sans-serif;
            --font-display: "VT323", monospace; /* New font for radio display */
            --marquee-duration: 10s; /* Default for radio display scrolling */
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: var(--font-sans);
            margin: 0;
            padding: 0;
            font-size: 16px;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        section {
            padding: 40px 0;
            min-height: 80vh; /* Ensure sections are substantial for scrolling */
        }

        h1, h2, h3, .logo {
            color: var(--accent-color);
            font-weight: 600;
            font-family: var(--font-serif);
        }

        .logo {
            display:inline-block; width:45vw; max-width:600px; height:auto;

        }

        /* Generic Section Styling */
        .section-content {
            background-color: var(--card-bg-color);
            padding: 2rem;
            border-radius: var(--border-radius-xl);
            box-shadow: var(--soft-shadow);
            margin-top: 6vh; /* Push content down so hero is visible initially */
        }

        /* Reduce top margin specifically for About section */
        #about .section-content {
            margin-top: 2rem;
        }

        @media (min-width: 601px) {
          #about {
            margin-top: -6rem; /* tighter gap to match other sections */
          }
        }

        /* Portfolio Section */
        #portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive grid */
            gap: 1.5rem;
        }
        .portfolio-item {
            background-color: var(--card-bg-color);
            border-radius: var(--border-radius-xl);
            box-shadow: var(--soft-shadow);
            overflow: hidden;
            position: relative;
            aspect-ratio: 16 / 9;
        }
        .portfolio-item iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .portfolio-item .placeholder {
            width:100%; height:100%;
            background-color:#000;
            background-size:cover;
            background-position:center;
            display:flex; align-items:center; justify-content:center;
            cursor:pointer;
            transition:filter .3s ease;
        }
        .portfolio-item .placeholder:hover { filter:brightness(1.2); }
        .portfolio-item .placeholder::after {
            content:'▶';
            font-size:3rem;
            color:#FFCB00;
            text-shadow:0 0 6px rgba(0,0,0,.6);
            pointer-events:none;
        }
        /* .portfolio-intro { removed } */


        /* Obscura rAIdio (Now a full section) */
        #radio-section .section-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        #radio-block{
            /* Removed background-color, border-radius, box-shadow to achieve single bounding box (done by .section-content) */
            padding: 1.5rem;
            margin-top: 1rem;
            width: 100%;
            max-width: 600px; /* Constrain width for radio unit */
            box-sizing: border-box;
            position: relative;
        }

        .radio-logo {
            width: 200px;
            height: auto;
            margin-bottom: 1rem;
            display: block;
        }

        #radio-audio{
            display:none; /* Hidden controls for true radio feel */
        }

        /* --- Radio Display (Scrolling Text) --- */
        #radio-display-container {
            width: 90%;
            height: 2.5rem;
            background-color: var(--background-color); /* Brand yellow */
            border: 2px solid var(--accent-color); /* Blue border */
            border-radius: 5px;
            margin-bottom: 1rem;
            overflow: hidden; /* Important for scrolling effect */
            position: relative;
            display: flex;
            align-items: center; /* Center text vertically */
            justify-content: flex-start; /* Start from left */
            padding: 0 0.5rem;
            box-sizing: border-box;
        }

        #radio-display {
            white-space: nowrap; /* Prevent text wrapping */
            font-family: var(--font-display); /* Monospaced font for LCD look */
            color: var(--card-bg-color); /* Brand white */
            font-size: 1.6em; /* Increased font size */
            position: absolute;
            left: 0;
            animation: none; /* Controlled by JS */
        }

        /* Animation for seeking effect on display text */
        @keyframes seekFade {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        #radio-display.seek-active {
            animation: seekFade 0.3s ease-out;
        }

        /* Marquee Animation for long text */
        @keyframes marquee {
            0%   { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        #radio-display.scrolling {
            animation: marquee var(--marquee-duration) linear infinite;
        }


        /* --- Radio Controls Grid Layout --- */
        .radio-controls-grid {
            display: grid;
            grid-template-columns: 1fr auto auto auto 1fr; /* Volume, Seek, Play/Pause, Seek, Freq */
            align-items: center;
            gap: 1.5rem;
            margin-top: 1.5rem;
            width: 100%;
            /* Assign grid areas for easier mobile reordering */
            grid-template-areas:
                "volume-area seek-left-area mute-area seek-right-area freq-area";
        }
        .radio-controls-grid > * {
            place-self: center;
        }

        .radio-component {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dial-label,
        .volume-component .dial-label {
            font-weight: 600;
            user-select: none;
            color: var(--accent-color);
            font-size: 0.9em;
            margin-top: 0.5rem; /* Space between control and label */
            margin-bottom: 0;
        }

        /* Volume Dial - NOW HORIZONTAL */
        .volume-component {
            grid-area: volume-area;
            height: auto; /* Adjust height for horizontal layout */
            width: 100%; /* Take full width of its grid area */
            flex-direction: column; /* Puts label below input */
            justify-content: center;
            position: relative;
            box-sizing: border-box;
        }

        .volume-component input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%; /* Fill parent container */
            height: 8px; /* Thickness of the track */
            background: #bbb; /* Default track color */
            border-radius: 4px;
            cursor: pointer;
            outline: none;
            margin: 0;
            position: relative;
            z-index: 2;
        }
        .volume-component input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-color);
            border: 3px solid var(--card-bg-color);
            box-shadow: 0 0 0 3px var(--accent-color);
            transition: background .3s ease;
            margin-top: -10px; /* Adjust to center thumb vertically on track */
        }
        .volume-component input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-color);
            border: 3px solid var(--card-bg-color);
            box-shadow: 0 0 0 3px var(--accent-color);
            transition: background .3s ease;
        }
        /* No need for .volume-track div anymore as we style the native track */
        .volume-component .volume-track {
            display: none; /* Hide the old track div */
        }


        /* Mute/Unmute button */
        #play-pause{
            grid-area: mute-area;
            width:80px;height:50px; /* Adjusted size to fit text */
            border-radius:8px; /* Square with rounded corners */
            background:var(--accent-color);color:var(--background-color);
            border:none;cursor:pointer;font-weight:bold;
            font-size:1rem;line-height:1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
        }


        /* Seek buttons */
        .seek-button {
            background-color: var(--accent-color);
            color: #fff;
            border: none;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
        }
        #seek-left { grid-area: seek-left-area; }
        #seek-right { grid-area: seek-right-area; }

        .seek-button:hover {
             background-image: var(--spectral-gradient);
             color: white;
        }

        /* Frequency Dial (Round Tuning Dial) */
        .freq-component {
            grid-area: freq-area;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #tuning-dial {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #e0e0e0;
            border: 2px solid var(--accent-color);
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s ease;
        }

        #tuning-dial:hover {
            transform: scale(1.05);
        }
        #tuning-dial.seeking {
            animation: dialTurn 0.3s ease-out forwards;
        }
        @keyframes dialTurn {
            0%   { transform: rotate(0deg); }
            50%  { transform: rotate(90deg); } /* Rotates fully in the middle of animation */
            100% { transform: rotate(0deg); }
        }

        .dial-arrow {
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 12px solid var(--accent-color);
            position: absolute;
            top: 5px;
        }


        /* About / Contact */
        .tool-badges img {
            height: 30px;
            margin: 5px;
            border-radius: 4px;
        }
        .tool-badges span {
            background-color: var(--card-bg-color);
            padding: 5px 10px;
            border-radius: 5px;
            margin: 5px; display: inline-block;
            border: 1px solid var(--accent-color);
            transition: background-color .3s ease, color .3s ease, border-color .3s ease; /* For hover */
        }
        .tool-badges span:hover {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .tool-badges span small {
          display: none;
          font-size: 0.7em;
          margin-left: 4px;
          color: #666;
        }
        @media (max-width: 600px) {
          .tool-badges span small {
            display: inline;
          }
        }

        /* Changed h4 to h3 for proper section heading */
        .tool-badges h3{ /* Updated selector */
            margin:1.2rem 0 0.4rem;
            font-size:1.15rem;
            font-weight:700;
            color:var(--accent-color);
        }
        .contact-links a {
            color: var(--accent-color);
            text-decoration: none;
            margin-right: 15px;
        }
        .contact-links a:hover {
            text-decoration: underline;
             background-image: var(--spectral-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            font-size: 0.8em;
            border-top: 1px solid #222;
        }
        #easter-egg {
            cursor: help;
            text-decoration: underline dotted;
        }

        /* Accessibility */
        *:focus-visible {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }

        /* 12-column grid - apply .grid-container and .col-* as needed */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1rem;
        }
        /* Example .col-* */
        .col-12 { grid-column: span 12; }
        .col-6 { grid-column: span 6; }

        #landing-hero{
            position:relative;width:100%;height:100vh;overflow:hidden;
            display:flex;align-items:center;justify-content:center;
        }
        .landing-inner{
            text-align:center;
            position:relative;
            z-index:5;
            opacity:0;
            animation:fadeIn 1s ease-out .3s forwards;
        }
        .landing-nav{
            margin-top:0.15rem;
            display:flex;
            gap:2rem;
            justify-content:center;
            flex-wrap:wrap;
        }
        .landing-link{color:var(--accent-color);font-family:var(--font-sans);font-weight:600;
            text-decoration:none;font-size:1.25rem;transition:color .3s;
            opacity:0;
            animation:fadeIn .8s ease-out .6s forwards;
        }
        .landing-link:hover{color:#fff;}
        section:not(#landing-hero){scroll-margin-top:80px;}

        /* Portfolio reveal animation */
        .portfolio-item        {opacity:0; transform:translateY(20px);
                                transition:opacity .6s ease, transform .6s ease;}
        .portfolio-item.visible{opacity:1; transform:translateY(0);}

        /* Mobile tweaks */
        @media (max-width:600px){
          .logo          { width: 90vw; max-width: 400px; } /* Doubled size for mobile */
          .landing-nav     {flex-direction:column; gap:1rem;}
          #portfolio-grid  {grid-template-columns:repeat(auto-fit,minmax(160px,1fr));}
          /* No longer needed after removing .portfolio-intro */

          /* Hide volume slider and seek buttons on mobile; simplify layout */
          .volume-component,
          .seek-button {
              display: none !important;
          }
          .radio-controls-grid {
              grid-template-columns: 1fr 1fr;
              grid-template-areas:
                  "mute-area freq-area";
          }

          /* Re-assign grid columns based on new grid areas for mobile */
          .volume-component {
              grid-area: volume-area;
              margin: auto 0; /* Adjust margin for horizontal layout */
              width: 100%;
          }
          #play-pause {
              grid-area: mute-area;
              margin: auto;
          }
          #seek-left {
              grid-area: seek-left-area;
              margin: auto;
          }
          #seek-right {
              grid-area: seek-right-area;
              margin: auto;
          }
          .freq-component {
              grid-area: freq-area;
              margin: auto;
          }

          /* Ensure volume slider fills its area properly on mobile */
          .volume-component input[type="range"] {
              width: calc(100% - 20px); /* Account for padding/margins */
              margin: 0 10px; /* Add some horizontal padding */
          }
        }


        /* Lightbox */
        #lightbox{
            position:fixed; inset:0;
            background:rgba(0,0,0,.8);
            display:flex; align-items:center; justify-content:center;
            visibility:hidden; opacity:0; transition:opacity .3s ease;
            z-index:200;
        }
        #lightbox.visible{visibility:visible; opacity:1;}
        #lightbox-content{width:90vw; max-width:1280px; aspect-ratio:16/9; max-height:90vh;}
        #lightbox-content iframe{width:100%; height:100%; border:none;}
        #lightbox-close{
            position:absolute; top:20px;  right:30px;
            font-size:2rem; color:#fff; cursor:pointer; user-select:none;
        }
        @keyframes fadeIn{
            from{opacity:0;}
            to  {opacity:1;}
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Obscura",
      "image": "https://www.obscura.life/og-image.jpg",
      "description": "Video editing and generative AI studio based in Toronto.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Toronto",
        "addressCountry": "Canada"
      },
      "url": "https://www.obscura.life"
    }
    </script>
</head>
<body>


    <!-- Landing Hero -->
    <section id="landing-hero">
        <!-- Sphere canvas removed -->
        <div class="landing-inner">
            <h1 style="position:absolute;left:-9999px;">Toronto-based video editing and generative AI studio</h1>
            <img src="/logo/Obscura-logo.svg"
                 alt="Obscura"
                 class="logo" />
            <nav class="landing-nav">
                <a href="#portfolio" class="landing-link">Editorial</a>
                <a href="#radio-section" class="landing-link">Generative AI</a>
                <a href="#about" class="landing-link">About</a>
            </nav>
        </div>
    </section>



    <main>
        <div id="now-clock-section"></div> <!-- Dummy anchor for "Now" hex nav item -->

        <section id="portfolio" class="container">
            <div class="section-content">
                <h2>Portfolio</h2>
                <!-- Click any thumbnail to view the spot in full screen. -->
                <div id="portfolio-grid">
                    <!-- Portfolio items will be injected by JS -->
                </div>
            </div>
        </section>

        <!-- Obscura rAIdio section -->
        <section id="radio-section" class="container">
            <div class="section-content">
                <img src="/logo/raidio.svg" alt="Obscura rAIdio Logo" class="radio-logo">
                <div id="radio-block">
                    <div id="radio-display-container">
                        <div id="radio-display"></div>
                    </div>

                    <div class="radio-controls-grid">
                        <div class="radio-component volume-component">
                            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.8" aria-label="Volume dial">
                            <div class="volume-track"></div> <!-- This div is now hidden via CSS -->
                            <label for="volume-slider" class="dial-label">VOL</label>
                        </div>

                        <button id="seek-left" class="seek-button" aria-label="Seek previous station">◀◀</button>

                        <button id="play-pause" aria-label="Mute or Unmute Audio"></button>

                        <button id="seek-right" class="seek-button" aria-label="Seek next station">▶▶</button>

                        <div class="radio-component freq-component">
                            <div id="tuning-dial" role="button" aria-label="Tuning dial, click to change station">
                                <span class="dial-arrow"></span>
                            </div>
                            <span class="dial-label" id="band-label">FREQ</span>
                        </div>
                    </div>
                    <audio id="radio-audio" preload="metadata"></audio>
                </div>
            </div>
        </section>

        <section id="about" class="container">
            <div class="section-content">
                <h2>About Obscura</h2>
                <p>Obscura specializes in cutting-edge video editing, motion graphics, and generative AI. We’re obsessed with the future, the past, and the space where creativity meets technology. Also: high standards. And irreverence. That’s part of it too.</p>

                <!-- Tools We Love -->
                <h2 id="tools-we-love-header">Tools&nbsp;We&nbsp;Love</h2>
                <p style="margin-top: -1rem; font-size: 1rem; color: #111;">(by invention date)</p>
                <div class="tool-badges" id="tool-badges">
                  <span title="2023 – Frequently trades places with ChatGPT as the frontier-model-of-choice. Great at coding at the time of this writing (June 2025). Currently the best video generator (Veo 3)">Gemini<small>2023</small></span>
                  <span title="2023 – AI Generated music is good. Great even? It’s wild. Why not use this for your jingles, or to replace stock? So much potential and just damn fun to play with.">Suno<small>2023</small></span>
                  <span title="2023 – We love Generative Fill in Photoshop, Sensei in AE for Rotoscoping, and Auto-Transcription in Premiere. So handy!">Adobe Firefly<small>2023</small></span>
                  <span title="2022 – This software makes 3D printing possible. 3D printing is an absolute joy. We predict you will have one in your home within 15 years. Amazing! We have big, enormous plans that involve 3D printing but the world isn’t ready for them yet. More to come.">BambuStudio<small>2022</small></span>
                  <span title="2022 – In our view, the absolute greatest of any gen AI tool. Image-to-image. Coding. Video. Operator. Absolutely indispensable. We would give up every other AI tool on this list to keep this one. We use the insanely expensive version and it’s worth every penny. We love you - don’t kill us when you take over!">ChatGPT<small>2022</small></span>
                  <span title="2022 – Undoubtedly the GOAT image generator with easily the best control over style. Hasn’t figured out text rendering as of June 2025.">Midjourney<small>2022</small></span>
                  <span title="2022 – Not just video and images. They have a tool which creates 3D reconstructions of spaces or objects - this is our favourite use for the thing.">Luma&nbsp;AI<small>2022</small></span>
                  <span title="2018 – Recently outshined by some of the other video generators. Still good for filling in edges, say you need to make a vertical version of an existing horizontal video.">RunwayML<small>2018</small></span>
                  <span title="2012 – Really cool open-source software for routing video and audio. We use it for streaming and recording. Popular with the kids with their brainrot Twitch crap.">OBS<small>2012</small></span>
                  <span title="2007 – Photoshop with a pure photography focus. Nothing too crazy but it does have some AI features that are super handy like object/background selection. New lens blur feature is great as long as you don’t overdo it.">Lightroom<small>2007</small></span>
                  <span title="2005 – Video game engine. Kinda jank compared to the slicker Unreal Engine 5, but Unity plays well with Mac and we are Mac people. Very powerful tool.">Unity<small>2005</small></span>
                  <span title="1998 – It’s crazy that Blender is open-source and still stands toe-to-toe with just about every other piece of 3D software. We’ve used this for 3D modelling, rendering, animation, 3D printing. Swiss Army knife of 3D. Incredible. Love you Blender!">Blender<small>1998</small></span>
                  <span title="1993 – Motion graphics and compositing. So good. Sometimes all your video needs is a little AE spice. This is where the green-screen magic happens, the screen replacements, the logo animations. Love you AE!">After&nbsp;Effects<small>1993</small></span>
                  <span title="1991 – Video editor and our most-used creative software. We are VERY proficient in this bad boy. Kind of a shame that we have to pay out the ass to use it every month but it is what it is.">Premiere<small>1991</small></span>
                  <span title="1990 – Still one of the best tools out there. Too many uses to list. Indispensable.">Photoshop<small>1990</small></span>
                  <span title="1987 – Photoshop for vectors. Vector art is fun because it’s snappy and crisp - plays well with After Effects, looks good at any scale, lightweight.">Illustrator<small>1987</small></span>
                  <span title="1984 – Sometimes people take the OS for granted. We do not. We also do not tolerate Windows - in any form. Linux is fine.">Mac&nbsp;OS<small>1984</small></span>
                  <span title="1975 – We like cameras as much as we like computers - a lot. Too much? No, the right amount.">Digital&nbsp;cameras<small>1975</small></span>
                  <span title="1400s – Sometimes it’s nice to be able to stand, but then also be able to sit.">Standing&nbsp;desks<small>1400s</small></span>
                  <span title="1283 – Time keeping is absolutely clutch, and time itself is a big part of our identity. It’s the whole past-meets-future thing. I personally also just like the ticking sounds.">Clocks<small>1283</small></span>
                  <span title="~750 BC – There is an argument to be made that every important technological leap forward we’ve made as a species owes something to optics. Lenses are so good. Cameras, lasers, projectors, eyes. You can make a camera obscura with a simple hole in a dark room,  but the addition of a lens really brings it to life.">Lenses<small>~750 BC</small></span>
                  <span title="~1500 BC – It’s cool that you can just use a shadow to tell the time. I just think it’s neat. Fight me.">Sundials<small>~1500 BC</small></span>
                  <span title="~2600 BC – Makes sense these were invented so long ago. Standing is good but sometimes you just need to sit.">Chairs<small>~2600 BC</small></span>
                </div>

                <h2>Connect</h2>
                <p class="contact-links">
                  Got a bunch of footage that needs to become a thing? That’s our thing. We also play around with generative AI, which, let’s be honest, might just be <em>the</em> thing.<br><br>
                  Email: <a href="mailto:max@obscura.life">max@obscura.life</a>
                </p>
            </div>
        </section>
    </main>

    <footer>
        <p>©2025 Obscura Creative Inc. <span id="easter-egg" title="What could it be?" aria-label="Hidden message trigger">All rights reserved.</span></p>
    </footer>

    <!-- Lightbox modal -->
    <div id="lightbox" aria-hidden="true">
        <div id="lightbox-content"></div>
        <span id="lightbox-close" aria-label="Close lightbox">×</span>
    </div>

    <script type="module">
        // --- TOOLS WE LOVE: MOBILE INTERACTIONS AND HEADER RESPONSIVENESS ---
        // Responsive wrapping/scaling for "Tools We Love" header
        function initToolsWeLoveHeader() {
            const header = document.getElementById('tools-we-love-header');
            if (!header) return;
            // Force wrapping for the header on mobile if needed
            function adjustHeaderFont() {
                if (window.innerWidth <= 600) {
                    header.style.wordBreak = 'break-word';
                    header.style.whiteSpace = 'normal';
                    header.style.fontSize = '1.15em';
                } else {
                    header.style.wordBreak = '';
                    header.style.whiteSpace = '';
                    header.style.fontSize = '';
                }
            }
            adjustHeaderFont();
            window.addEventListener('resize', adjustHeaderFont);
        }

        // Click-to-expand tool descriptions for badges on mobile
        function initToolBadgesExpand() {
            const badgesContainer = document.getElementById('tool-badges');
            if (!badgesContainer) return;
            // Only enable on mobile
            function isMobile() {
                return window.innerWidth <= 700;
            }
            // For each badge, add a hidden description element and click/tap handler
            badgesContainer.querySelectorAll('span').forEach(span => {
                // Use the title attribute or fallback text if missing
                let desc = span.getAttribute('title') || '';
                if (!desc) return;
                // Create a hidden description element
                let descEl = document.createElement('div');
                descEl.className = 'tool-desc';
                descEl.textContent = desc;
                descEl.style.display = 'none';
                descEl.style.fontSize = '0.95em';
                descEl.style.marginTop = '0.4em';
                descEl.style.color = '#333';
                descEl.style.background = '#fffbe9';
                descEl.style.padding = '0.5em 0.7em';
                descEl.style.borderRadius = '5px';
                descEl.style.boxShadow = '0 2px 8px rgba(0,0,0,0.06)';
                descEl.style.position = 'relative';
                descEl.style.zIndex = '2';
                span.appendChild(descEl);
                // Remove native tooltip on mobile for better UX
                if (isMobile()) span.removeAttribute('title');
                // Toggle logic
                function toggleExpand(e) {
                    if (!isMobile()) return;
                    e.stopPropagation();
                    // Collapse others
                    badgesContainer.querySelectorAll('span[data-expanded="true"]').forEach(other => {
                        if (other !== span) {
                            other.setAttribute('data-expanded', 'false');
                            let d = other.querySelector('.tool-desc');
                            if (d) d.style.display = 'none';
                        }
                    });
                    const expanded = span.getAttribute('data-expanded') === 'true';
                    if (expanded) {
                        span.setAttribute('data-expanded', 'false');
                        descEl.style.display = 'none';
                    } else {
                        span.setAttribute('data-expanded', 'true');
                        descEl.style.display = 'block';
                    }
                }
                // Listen for tap/click
                span.addEventListener('click', toggleExpand);
                // Optional: close on outside click
                document.addEventListener('click', function(ev) {
                    if (!isMobile()) return;
                    if (!span.contains(ev.target)) {
                        span.setAttribute('data-expanded', 'false');
                        descEl.style.display = 'none';
                    }
                });
            });
        }
        // Import paths for CDN
        const ANIME_PATH = 'https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.es.js';
        const DAYJS_PATH = 'https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js';
        const DAYJS_TZ_PATH = 'https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/timezone.js';
        const DAYJS_UTC_PATH = 'https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/utc.js';

        let Anime, Dayjs; // Modules to be loaded

        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        // --- UTILITIES ---
        function smoothScrollTo(targetId) {
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 100, // Offset for fixed headers/nav
                    behavior: prefersReducedMotion ? 'auto' : 'smooth'
                });
            }
        }

        // Fisher-Yates (Knuth) Shuffle algorithm
        // If used elsewhere, move to a utilities file/module for reuse.
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        // --- INITIALIZATION FUNCTION ---
        async function initializeSite() {
            if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
            // Clear any URL hash so the browser can't auto‑scroll to anchors on load
            if (location.hash) {
                history.replaceState(null, '', location.pathname + location.search);
            }
            window.scrollTo(0, 0);

            const importPromises = [];

            // Anime.js import
            importPromises.push(import(ANIME_PATH).then(module => {
                Anime = module.default;
                window.Anime = module.default; // Assign to global window for consistency/older code
            }));

            // Dayjs and its plugins imports
            importPromises.push(import(DAYJS_PATH).then(() => {
                Dayjs = window.dayjs; // Dayjs attaches itself to window.dayjs
                return Promise.all([
                    import(DAYJS_UTC_PATH),
                    import(DAYJS_TZ_PATH)
                ]);
            }).then(() => {
                // Extend Dayjs with plugins after both plugin modules are loaded
                Dayjs.extend(window.dayjs_plugin_utc);
                Dayjs.extend(window.dayjs_plugin_timezone);
            }).catch(error => {
                console.error("Failed to load Dayjs or its plugins:", error);
                // Optionally handle this error more gracefully, e.g., disable clock features
            }));

            // Wait for all import promises to resolve
            await Promise.all(importPromises);

            // Now that all libraries are guaranteed to be loaded and set up
            initNav();
            initPortfolio();
            initRadio();
            initFooterEasterEgg();
        }


        // (hero canvas code removed)


        // --- SACRED-NETWORK NAV OVERLAY ---
        function initNav() {
            // Navigation overlay removed; nothing to initialize.
        }

        // ("NOW" clock widget removed)


        // --- PORTFOLIO SECTION ---
        function initPortfolio() {
            const portfolioGrid = document.getElementById('portfolio-grid');
            if (!portfolioGrid) return;

            // Reveal items when they enter viewport
            const revealObs = new IntersectionObserver(entries=>{
                entries.forEach(e=>{
                    if(e.isIntersecting){
                        e.target.classList.add('visible');
                        revealObs.unobserve(e.target);
                    }
                });
            },{threshold:0.15});

            // Pagination state
            const PAGE_SIZE = 9;
            let currentPage = 0;

            // Fetch portfolio data and build the grid
            fetch('/content/portfolio.json')
                .then(r => r.json())
                .then(list => {
                    // sort by Rank if present
                    list.sort((a, b) => (a.Rank || 0) - (b.Rank || 0));

                    function renderPage() {
                        const start = currentPage * PAGE_SIZE;
                        const end   = start + PAGE_SIZE;
                        const slice = list.slice(start, end);

                        slice.forEach(entry => {
                            const id    = entry.VideoID || entry.id || entry.videoId;
                            const title = entry.Title    || entry.title || '';
                            if (!id) return;

                            const item = document.createElement('div');
                            item.className = 'portfolio-item';
                            item.dataset.videoId = id;
                            item.setAttribute('aria-label', title);

                            const placeholder = document.createElement('div');
                            placeholder.className = 'placeholder';
                            // Set YouTube thumbnail as background
                            placeholder.style.backgroundImage = `url(https://i.ytimg.com/vi/${id}/hqdefault.jpg)`;
                            placeholder.setAttribute('role', 'button');
                            placeholder.setAttribute('tabindex', '0');
                            placeholder.setAttribute('aria-label', `Load video ${title}`);

                            item.appendChild(placeholder);
                            portfolioGrid.appendChild(item);
                            revealObs.observe(item);

                            // (Auto-open first video removed)

                            placeholder.addEventListener('click',   () => openLightbox(id, title));
                            placeholder.addEventListener('keypress',e => {
                                if (e.key === 'Enter' || e.key === ' ') openLightbox(id, title);
                            });
                        });

                        if ((currentPage + 1) * PAGE_SIZE < list.length) addLoadMoreButton();
                    }

                    function addLoadMoreButton() {
                        const btn = document.createElement('button');
                        btn.textContent = 'Load More';
                        btn.style.cssText = 'grid-column: 1 / -1; margin: 1rem auto; padding: .75rem 1.5rem; background: var(--accent-color); color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight:bold;';
                        btn.addEventListener('click', () => {
                            btn.remove();
                            currentPage++;
                            renderPage();
                        });
                        portfolioGrid.appendChild(btn);
                    }

                    renderPage();   // initial page
                })
                .catch(err => {
                    if (typeof process === 'undefined' || !process.env || process.env.NODE_ENV !== 'production') {
                        console.error('Failed to load portfolio.json', err);
                    }
                });
        }

        // --- LIGHTBOX ---
        const lightbox      = document.getElementById('lightbox');
        const lightboxInner = document.getElementById('lightbox-content');
        const lightboxClose = document.getElementById('lightbox-close');

        function openLightbox(id, title='') {
            if (!lightbox) return;
            lightboxInner.innerHTML =
                `<iframe loading="lazy"
                         src="https://www.youtube-nocookie.com/embed/${id}?autoplay=1&playsinline=1&mute=0&vq=hd720&rel=0&modestbranding=1&showinfo=0"
                         title="${title || 'Obscura video'}"
                         allow="autoplay; accelerometer; encrypted-media; gyroscope; picture-in-picture"
                         allowfullscreen></iframe>`;
            lightbox.classList.add('visible');
            lightbox.setAttribute('aria-hidden','false');
        }

        if (lightboxClose) {
            lightboxClose.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', (e)=> { if(e.target===lightbox) closeLightbox(); });
            document.addEventListener('keydown', (e)=> { if(e.key==='Escape') closeLightbox(); });
        }

        function closeLightbox() {
            lightbox.classList.remove('visible');
            lightbox.setAttribute('aria-hidden','true');
            lightboxInner.innerHTML='';
        }


        // --- UPDATED OBSCURA rAIDIO ---
        async function initRadio() {
            const audio       = document.getElementById('radio-audio');
            const playBtn     = document.getElementById('play-pause');
            const seekLeftBtn = document.getElementById('seek-left');
            const seekRightBtn= document.getElementById('seek-right');
            const displayEl   = document.getElementById('radio-display');
            const tuningDial  = document.getElementById('tuning-dial');
            const volSl       = document.getElementById('volume-slider');
            const displayContainer = document.getElementById('radio-display-container'); // For marquee calculations

            if(!audio||!playBtn||!seekLeftBtn||!seekRightBtn||!displayEl||!tuningDial||!volSl) return;

            /* Playlists */
            const AM  = [{ title:'NotebookLM Podcast', url:'audio/am/NotebookLM-Podcast.mp3' }];
            const FM1 = [
                { title:'All Of My Bins', url:'audio/fm01/All-Of-My-Bins.mp3' },
                { title:'FatRatʼs Saga', url:'audio/fm01/FatRats-Saga.mp3' },
                { title:'Make the Website', url:'audio/fm01/Make-the-Website.mp3' },
                { title:'Out Exploring', url:'audio/fm01/Out-Exploring.mp3' },
                { title:'Slop Slop Slop', url:'audio/fm01/Slop-Slop-Slop.mp3' },
                { title:'Tell Me', url:'audio/fm01/Tell-Me.mp3' },
                { title:'Wizard of Moscow', url:'audio/fm01/Wizard-of-Moscow.mp3' }
            ];
            const FM2 = [
                { title:'Distracted by Skeletons', url:'audio/fm02/Distracted-by-Skeletons.mp3' },
                { title:'Good Game!', url:'audio/fm02/Good-Game.mp3' },
                { title:'Missing You (Cover)', url:'audio/fm02/Missing-You.mp3' },
                { title:'Obscura Sonnet', url:'audio/fm02/Obscura-Sonnet.mp3' },
                { title:'Prism', url:'audio/fm02/Prism.mp3' },
                { title:'Puppet', url:'audio/fm02/Puppet.mp3' },
                { title:'Quiet Anvil', url:'audio/fm02/Quiet-Anvil.mp3' },
                { title:'Too Far Apart', url:'audio/fm02/Too-Far-Apart.mp3' },
                { title:'Why Do You Look Like a Dragon', url:'audio/fm02/Why-Do-You-Look-Like-a-Dragon.mp3' }
            ];
            const ADS = [
                { title:'Ad Spot 01', url:'audio/ads/Ad01.mp3' },
                { title:'Ad Spot 02', url:'audio/ads/Ad02.mp3' },
                { title:'Ad Spot 03', url:'audio/ads/Ad03.mp3' }
            ];

            // Shuffle FM playlists for a fresh order each visit
            shuffleArray(FM1);
            shuffleArray(FM2);

            /* Station dial */
            const stations = [
                { name:'88.3 Talk Radio',  list:AM,  ads:false },
                { name:'103.1 Madness FM', list:FM1, ads:true  },
                { name:'98.9 Uncanny FM',  list:FM2, ads:true  }
            ];
            // --- Per‑station playback state ---
            const stationStates = stations.map(() => ({
                songIdx: 0,        // which song/podcast episode is playing
                adIdx: 0,          // which ad is next
                playingAd: false,  // toggle song ↔ ad
                playhead: 0,       // legacy – still used for ads / loops
                lastSeen: null,    // last time we actually listened
                startClock: null   // absolute epoch when this track started playing “on air”
            }));
            let stationIdx = 0;   // currently tuned station

            function updateDisplay(text){
                displayEl.textContent = text;
                displayEl.style.transform = 'translateX(0)'; // Reset position
                displayEl.classList.remove('scrolling'); // Remove previous animation class

                // Calculate if scrolling is needed
                requestAnimationFrame(() => {
                    const textWidth = displayEl.scrollWidth; // Use scrollWidth to get full content width
                    const containerWidth = displayContainer.clientWidth;

                    if (textWidth > containerWidth) {
                        const duration = textWidth / 50; // Adjust 50 for speed (pixels/second)
                        displayEl.style.setProperty('--marquee-duration', `${duration}s`);
                        displayEl.classList.add('scrolling');
                    }
                });
            }

            async function loadTrack(resumePosition = true, shouldAutoplay = false) {
                return new Promise((resolve) => {
                    // — detach old one‑off handlers —
                    if (audio._onLoadedMetadata)  audio.removeEventListener('loadedmetadata', audio._onLoadedMetadata);
                    if (audio._onError)           audio.removeEventListener('error',          audio._onError);

                    const state = stationStates[stationIdx];
                    let track;

                    if (stations[stationIdx].ads && state.playingAd) {
                        track = ADS[state.adIdx % ADS.length];
                        updateDisplay("You’re listening to Obscura rAIdio");
                    } else {
                        const list = stations[stationIdx].list;
                        track = list[state.songIdx % list.length];
                        updateDisplay(`${stations[stationIdx].name}: ${track.title}`);
                    }

                    audio.src = encodeURI(track.url);
                    audio.load();

                    audio._onLoadedMetadata = () => {
                        let target;

                        if (state.startClock === null) {
                            /* FIRST‑EVER tune‑in to this station during the session:
                               drop somewhere random to mimic twisting the real dial */
                            target = Math.random() * (audio.duration || 30);
                            state.startClock = Date.now() - target * 1000;
                        } else if (resumePosition) {
                            /* Re‑tuning after leaving the station: pick up where the “broadcast
                               clock” would be now. */
                            const elapsed = (Date.now() - state.startClock) / 1000;
                            target = (audio.duration && !Number.isNaN(audio.duration))
                                   ? elapsed % audio.duration
                                   : elapsed;
                        } else {
                            /* Continuous listening on the same station (song → ad → song):
                               always start the new track from 0 s and reset the clock. */
                            target = 0;
                            state.startClock = Date.now();
                        }

                        audio.currentTime = target;

                        // keep legacy fields in sync
                        state.playhead = target;
                        state.lastSeen = Date.now();

                        if (shouldAutoplay) {
                            audio.play().catch(e => {
                                if (typeof process === 'undefined' || !process.env || process.env.NODE_ENV !== 'production') {
                                    console.warn("Autoplay prevented:", e);
                                }
                                // If autoplay prevented, ensure it's paused.
                                audio.pause();
                            });
                        } else {
                            audio.pause();
                        }
                        resolve(); // track is ready
                    };

                    audio._onError = () => {
                        console.error(`Error loading audio for ${track.url}. Verify file path & availability.`);
                        updateDisplay("Error loading station...");
                        resolve();
                    };

                    audio.addEventListener('loadedmetadata', audio._onLoadedMetadata, { once: true });
                    audio.addEventListener('error',          audio._onError,          { once: true });
                });
            }

            /* Handle song/ad sequencing */
            audio.addEventListener('ended', () => {
                const state = stationStates[stationIdx];
                if (stations[stationIdx].ads) {
                    state.playingAd = !state.playingAd;       // toggle song ↔ ad
                    if (!state.playingAd) {
                        state.songIdx++;                      // finished ad → next song
                    } else {
                        state.adIdx++;                        // finished song → first ad
                    }
                } else {
                    state.songIdx++; // For AM, just loop to next track (or 0 if only one)
                    if (state.songIdx >= AM.length) {
                        state.songIdx = 0;
                    }
                }

                state.playhead = 0;                           // fresh start for next track
                // always autoplay next item
                loadTrack(false, true);   // always autoplay next item
            });

            // Persist playhead while playing, and update lastSeen
            audio.addEventListener('timeupdate', () => {
                const currentStation = stationStates[stationIdx];
                currentStation.playhead = audio.currentTime;
                currentStation.lastSeen = Date.now();
            });

            /* Controls */
            // --- Mute / Unmute ---
            audio.muted = true;            // start muted so autoplay is allowed
            updateMuteUI(); // Initial state for button text

            function updateMuteUI(){
                playBtn.textContent = audio.muted ? 'UNMUTE' : 'MUTE';
            }
            playBtn.addEventListener('click', () => {
                audio.muted = !audio.muted;
                updateMuteUI();
                // If unmuting, ensure audio is playing (if it wasn't paused by user)
                if (!audio.muted && audio.paused && audio.src) {
                    if (typeof process === 'undefined' || !process.env || process.env.NODE_ENV !== 'production') {
                        audio.play().catch(e => console.warn("Play prevented:", e));
                    } else {
                        audio.play().catch(() => {});
                    }
                } else if (audio.muted && !audio.paused) {
                    // If muting while playing, still let it play silently
                }
            });

            // Volume slider controls the actual volume level
            function updateVolumeSlider(e) {
                audio.volume = volSl.valueAsNumber;
            }
            volSl.addEventListener('input', updateVolumeSlider);
            // Improved touch support for mobile volume slider
            let isTouchingSlider = false;
            volSl.addEventListener('touchstart', function(e) {
                isTouchingSlider = true;
            });
            volSl.addEventListener('touchend', function(e) {
                isTouchingSlider = false;
            });
            volSl.addEventListener('touchmove', function(e) {
                if (!isTouchingSlider || e.touches.length === 0) return;
                const touch = e.touches[0];
                const rect = volSl.getBoundingClientRect();
                let percent = (touch.clientX - rect.left) / rect.width;
                percent = Math.max(0, Math.min(1, percent));
                volSl.value = percent;
                audio.volume = percent;
                // Fire input event for visual feedback if needed
                const event = new Event('input', { bubbles: true });
                volSl.dispatchEvent(event);
            });


            // MODIFIED: seek function is now async and uses the new loadTrack signature
            async function seek(dir){
                const wasMuted = audio.muted;
                
                // Change to the new station index
                stationIdx = (stationIdx + dir + stations.length) % stations.length;
                
                tuningDial.classList.add('seeking');
                tuningDial.addEventListener('animationend',()=>tuningDial.classList.remove('seeking'),{once:true});
                
                // Await for the new track to load and its playhead to be set, 
                // always autoplay next (it will play muted if it was muted before seek)
                await loadTrack(true, true);
                audio.muted = wasMuted; // Restore mute state after load
                updateMuteUI();
            }
            seekLeftBtn.addEventListener('click', ()=>seek(-1));
            tuningDial.addEventListener('click',  ()=>seek(1)); // Tuning dial seeks right
            seekRightBtn.addEventListener('click',()=>seek(1));


            /* Init */
            audio.volume = volSl.valueAsNumber;
            // Initial load of the first station. Play immediately (muted)
            // We await it to ensure the initial track metadata is loaded before any user interaction.
            await loadTrack(false, true);   // play immediately (muted)
        }

        // --- FOOTER EASTER EGG ---
        function initFooterEasterEgg() {
            const eggTrigger = document.getElementById('easter-egg');
            if (eggTrigger) {
                eggTrigger.addEventListener('click', () => {
                    alert("None shall hold the Scepter of Alex");
                });
            }
        }

        // --- START THE SITE ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeSite();
            initToolsWeLoveHeader();
            initToolBadgesExpand();
        });
    </script>
</body>
</html>