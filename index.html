<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obscura Life</title>

    <!-- Brand fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="/logo/Obscura-logo.svg" type="image/svg+xml">

    <!-- Preconnect hints -->
    <link rel="preconnect" href="https://i.ytimg.com">
    <link rel="preconnect" href="https://www.youtube-nocookie.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- SEO / Social -->
    <meta name="description" content="Obscura Creative blends editorial craftsmanship with generative AI to deliver future-forward video and interactive experiences.">
    <meta property="og:title" content="Obscura Creative">
    <meta property="og:description" content="Editorial | Generative AI | Experiential">
    <meta property="og:url" content="https://www.obscura.life/">
    <meta property="og:image" content="https://www.obscura.life/og-image.jpg">
    <meta property="og:type" content="website">

    <style>
        :root{
            --accent-color:#0455BF;
            --background-color:#FFCB00;
            --text-color:#1A1A1A;
            --card-bg-color:#FAFAFA;
            --border-radius-xl:1rem;
            --soft-shadow:0 10px 15px -3px rgba(0,0,0,.08),0 4px 6px -2px rgba(0,0,0,.04);
            --spectral-gradient:linear-gradient(90deg,hsl(210,80%,55%),hsl(220,80%,55%),hsl(230,80%,55%));
            --font-sans:"Red Hat Display",system-ui,sans-serif;
            --font-serif:"Red Hat Display",Georgia,serif;
            --font-display:"VT323",monospace;
        }

        body{
            margin:0;padding:0;font:16px/1.6 var(--font-sans);
            background:var(--background-color);color:var(--text-color);
            overflow-x:hidden;
        }

        /* â€¦ [unchanged global styles truncated for brevity] â€¦ */

        /* ---------- RADIO STYLES ---------- */
        #play-pause{
            width:50px;height:50px;border-radius:50%;
            background:var(--accent-color);color:var(--background-color);
            border:none;cursor:pointer;font-size:1.5rem;line-height:1;
            grid-column:3;
        }
        #play-pause.muted::after   { content:'ðŸ”‡'; }
        #play-pause.unmuted::after { content:'ðŸ”Š'; }

        /* seek buttons */
        .seek-button{background:var(--accent-color);color:#fff;border:none;
            padding:.75rem 1.25rem;border-radius:.5rem;cursor:pointer;font-weight:bold;font-size:1.1rem;}
        #seek-left{grid-column:2}
        #seek-right{grid-column:4}
        .seek-button:hover{background-image:var(--spectral-gradient)}

        /* â€¦ remaining CSS unchanged â€¦ */
    </style>
</head>
<body>

<!-- ---------- HERO, PORTFOLIO, ETC. UNCHANGED ---------- -->

<!-- ---------- RADIO SECTION ---------- -->
<section id="radio-section" class="container">
  <div class="section-content">
    <img src="/logo/raidio.svg" alt="Obscura rAIdio Logo" class="radio-logo">

    <div id="radio-block">
      <div id="radio-display-container">
        <div id="radio-display"></div>
      </div>

      <div class="radio-controls-grid">
        <!-- volume slider -->
        <div class="radio-component volume-component">
          <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.8" aria-label="Volume dial">
          <div class="volume-track"></div>
          <label for="volume-slider" class="dial-label">VOL</label>
        </div>

        <!-- seek / mute -->
        <button id="seek-left"  class="seek-button" aria-label="Previous station">â—€â—€</button>
        <button id="play-pause" aria-label="Mute / Unmute"></button>
        <button id="seek-right" class="seek-button" aria-label="Next station">â–¶â–¶</button>

        <!-- tuning dial -->
        <div class="radio-component freq-component">
          <div id="tuning-dial" role="button" aria-label="Tuning dial (click)"><span class="dial-arrow"></span></div>
          <span class="dial-label">FREQ</span>
        </div>
      </div>

      <audio id="radio-audio" preload="metadata"></audio>
    </div>
  </div>
</section>

<!-- ---------- FOOTER & OTHER SECTIONS UNCHANGED ---------- -->

<script type="module">
/* --------------------- UTILITIES ---------------------- */
function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

/* --------------------- RADIO -------------------------- */
async function initRadio(){
    const audio=document.getElementById('radio-audio');
    const muteBtn=document.getElementById('play-pause');
    const seekL=document.getElementById('seek-left');
    const seekR=document.getElementById('seek-right');
    const display=document.getElementById('radio-display');
    const dial=document.getElementById('tuning-dial');
    const vol=document.getElementById('volume-slider');
    if(!audio||!muteBtn||!seekL||!seekR||!display||!dial||!vol)return;

    /* playlists */
    const AM=[{title:'NotebookLM Podcast',url:'audio/am/NotebookLM-Podcast.mp3'}];
    const FM1=[ /* titles trimmed */ {title:'All Of My Bins',url:'audio/fm01/All-Of-My-Bins.mp3'}, /* â€¦ */ ];
    const FM2=[ /* titles trimmed */ {title:'Distracted by Skeletons',url:'audio/fm02/Distracted-by-Skeletons.mp3'}, /* â€¦ */ ];
    const ADS=[{title:'Ad01',url:'audio/ads/Ad01.mp3'},{title:'Ad02',url:'audio/ads/Ad02.mp3'},{title:'Ad03',url:'audio/ads/Ad03.mp3'}];

    /* shuffle FM for fresh order each reload */
    shuffleArray(FM1); shuffleArray(FM2);

    const stations=[
      {name:'88.3 Talk Radio', list:AM,  ads:false},
      {name:'103.1 Madness FM',list:FM1, ads:true },
      {name:'98.9 Uncanny FM', list:FM2, ads:true }
    ];

    const state=stations.map(()=>({
      songIdx:0,adIdx:0,playingAd:false,
      startClock:null /* absolute epoch when current track began */
    }));
    let idx=0;   // current station index

    /* ------------ helpers ------------- */
    function updateDisplay(t){display.textContent=t}

    async function loadTrack(resume=true,autoplay=true){
        /* detach old one-off handlers */
        audio.onloadmetadata && audio.removeEventListener('loadedmetadata',audio.onloadmetadata);
        audio.onerror        && audio.removeEventListener('error',audio.onerror);

        const s=state[idx];
        let track;
        if(s.playingAd){
            track=ADS[s.adIdx%ADS.length];
            updateDisplay("Youâ€™re listening to Obscura rAIdio");
        }else{
            track=stations[idx].list[s.songIdx%stations[idx].list.length];
            updateDisplay(`${stations[idx].name}: ${track.title}`);
        }

        audio.src=track.url;
        audio.load();

        audio.onloadmetadata=()=>{
            let targetSec;
            if(s.startClock!==null){
                const elapsed=(Date.now()-s.startClock)/1000;
                targetSec=audio.duration&&!Number.isNaN(audio.duration)? elapsed%audio.duration : elapsed;
            }else{
                targetSec=Math.random()*(audio.duration||30);
                s.startClock=Date.now()-targetSec*1000;
            }
            audio.currentTime=targetSec;

            if(autoplay){audio.play().catch(()=>{});}
            else audio.pause();
        };

        audio.onerror=()=>console.error('Audio load error for',track.url);

        audio.addEventListener('loadedmetadata',audio.onloadmetadata,{once:true});
        audio.addEventListener('error',audio.onerror,{once:true});
    }

    /* -------- end of track handler -------- */
    audio.addEventListener('ended',()=>{
        const s=state[idx];
        if(stations[idx].ads){
            s.playingAd=!s.playingAd;
            s.playingAd? s.adIdx++ : s.songIdx++;
        }else{
            s.songIdx=0;
        }
        loadTrack(false,true); // always roll into next item
    });

    /* -------- controls -------- */
    audio.muted=true;
    muteBtn.classList.add('muted');
    function paintMute(){muteBtn.classList.toggle('muted',audio.muted);muteBtn.classList.toggle('unmuted',!audio.muted)}
    muteBtn.addEventListener('click',()=>{audio.muted=!audio.muted;paintMute();});
    vol.addEventListener('input',()=>audio.volume=vol.valueAsNumber);

    async function seek(dir){
        const wasMuted=audio.muted;
        idx=(idx+dir+stations.length)%stations.length;
        dial.classList.add('seeking');
        dial.addEventListener('animationend',()=>dial.classList.remove('seeking'),{once:true});
        await loadTrack(true,true);
        audio.muted=wasMuted; paintMute();
    }
    seekL.addEventListener('click',()=>seek(-1));
    seekR.addEventListener('click',()=>seek(1));
    dial.addEventListener('click', ()=>seek(1));

    /* init */
    audio.volume=vol.valueAsNumber;
    await loadTrack(false,true); // autoplay muted
}

/* ------------- launch --------------- */
document.addEventListener('DOMContentLoaded',()=>{initRadio(); /* other init calls â€¦ */});
</script>
</body>
</html>